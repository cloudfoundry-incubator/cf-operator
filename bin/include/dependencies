#!/bin/bash

quarks_job_release="v0.0.148-g12373c2"

# QUARKS_JOB_IMAGE_TAG is used for integration tests
if [ -z ${QUARKS_JOB_IMAGE_TAG+x} ]; then
  # + is not allowed in docker versions
  QUARKS_JOB_IMAGE_TAG=$(echo "$quarks_job_release" | sed 's/+/-/')
  export QUARKS_JOB_IMAGE_TAG
fi

# QUARKS_JOB_HELM_VERSION is used to build helm charts including sub-charts
if [ -z ${QUARKS_JOB_HELM_VERSION+x} ]; then
  # helm version handling for leading 'v' is inconsistent, 'v' is not part of semver
  QUARKS_JOB_HELM_VERSION=$(echo "$quarks_job_release" | sed 's/^v//')
  export QUARKS_JOB_HELM_VERSION
fi
